public class Solution {
    public int solve(int n) {
         if (n == 0) return 0;
         long mod = 1000000007;
        long sum = 0;

        int p = (int)(Math.log(n) / Math.log(2));

        sum += (long) p * (1 << (p - 1));
        sum %= mod;

        long rem = n - (1 << p) + 1;
        sum += rem;
        sum %= mod;

       
        sum += solve(n - (1 << p));
        sum %= mod;

        return (int) sum;
       
    }
}